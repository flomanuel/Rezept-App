<app-header-bar [background]="false" [position]="'absolute'"></app-header-bar>
<!--<div>-->
<!--  <button type="button" data-toggle="modal" class="button"-->
<!--          (click)="zeigePosition()">Reload-->
<!--  </button>-->
<!--  &lt;!&ndash;  <p>{{geoLocation.latitude}}</p>&ndash;&gt;-->
<!--</div>-->
<!--<div *ngFor="let market of markets">-->
<!--  <button type="button" data-toggle="modal" class="button"-->
<!--          (click)="setCenter(stringToFloat(market.lon) , stringToFloat(market.lat))">Zur eigenen Position-->
<!--  </button>-->
<!--</div>-->


<div id="map" class="map"></div>

<div data-toggle="modal" class="gpsButton"
     (click)="setCenter(geoLocation.longitude , geoLocation.latitude)">
  <i class="material-icons">gps_fixed</i>
</div>

<div *ngIf="markets" id="markets" class="markets">
  <div *ngFor="let market of markets" (click)="setCenter(stringToFloat(market.lon), stringToFloat(market.lat))">
    <table>
      <tr>
        <th>{{market.index}}.</th>
        <!--Namen des Supermarkt ausschneiden-->
        <th>{{market.display_name.substring(0, market.display_name.indexOf(','))}}</th>
        <th *ngIf="market.extratags.opening_hours?.indexOf(';') > 0; else keinSimekolon">
          {{market.extratags.opening_hours.substring(0, market.extratags.opening_hours.indexOf(';'))}} </th>
        <ng-template #keinSimekolon>
          <th>{{market.extratags.opening_hours}}</th>
        </ng-template>
        <th>
          Distanz: {{distance(stringToFloat(market.lat), stringToFloat(market.lon), geoLocation.latitude, geoLocation.longitude)}}
          km
        </th>
      </tr>
    </table>
  </div>
</div>

